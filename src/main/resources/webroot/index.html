<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>org.vchat.controller.VChat</title>
    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="//cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js"></script>
    <script src="Js/event/vertx-eventbus.js"></script>
    <script type="text/javascript">

        var eb = new EventBus("/clientController/");
        var signinWin;
        eb.onopen = function () {
            eb.registerHandler("chat.to.client", function (err, msg) {
                var parsedData = msg.body;
//                localStorage.setItem("tokenKey",parsedData.tokenKey);
//                localStorage.setItem("tokenKeySecret",parsedData.tokenKeySecret);
                window.location.href= parsedData.authorizationUrl;
//                signinWin = window.open(parsedData.authorizationUrl, "SignIn", "width=780,height=410,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left=" + 500 + ",top=" + 500);
//                signinWin.focus();
                return false;
            });
        };

        function sendMes() {
            eb.publish("chat.to.server", {classifier:"loginUri"});
        }

    </script>
</head>
<body>
    <button onclick="sendMes()">Login with Twitter</button>

    </iframe>
</body>
</html>