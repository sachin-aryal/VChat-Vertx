<html>
<head>
    <script src="Js/jquery-1.11.2.min.js"></script>
    <script src="Js/sockJs.min.js"></script>
    <script src="Js/vertx-eventbus.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Raleway:500' rel='stylesheet' type='text/css'>
    <link href='Css/login.css' rel='stylesheet' type='text/css'>
    <link href='Css/bootstrap.min.css' rel='stylesheet' type='text/css'>
    <script type="text/javascript">

        var eb = new EventBus("/clientController/");

        eb.onopen = function () {
            eb.registerHandler("chat.to.client", function (err, msg) {
                var parsedData = msg.body;
                localStorage.setItem("tokenKey",parsedData.tokenKey);
                localStorage.setItem("tokenKeySecret",parsedData.tokenKeySecret);
                window.location.href= parsedData.authorizationUrl;
                return false;
            });
        };

        $(function(){
            var uName = localStorage.getItem("userName");
                if(uName!=null && uName!=""){
                window.location.href="http://localhost:8080/dashboard"
            }
        });

        function sendMes() {
            eb.publish("chat.to.server", {classifier:"loginUri"});
        }

    </script>

</head>
<body>
<div class="middlePage">
    <div class="page-header">
        <h1 class="logo"> <small>Welcome to VChat</small></h1>
    </div>

    <div class="panel panel-info">
        <div class="panel-heading">
            <h3 class="panel-title">Please Sign In</h3>
        </div>
        <div class="panel-body">

            <div class="row">

                <div class="col-md-7" >
                    <button class="btn btn-primary" style="margin:0 auto;float: right" onclick="sendMes()">Login With Twitter</button>
                </div>

            </div>

        </div>
    </div>

    <p>Powered By: <a href="https://github.com/sachin-aryal/VChat-Vertx">VChat</a></p>

</div>
</body>
</html>