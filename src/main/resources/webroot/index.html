<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>org.vchat.controller.VChat</title>
    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="//cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js"></script>
    <script src="Js/event/vertx-eventbus.js"></script>
    <script type="text/javascript">

        var eb = new EventBus("/clientController/");

        eb.onopen = function () {
            eb.registerHandler("chat.to.client", function (err, msg) {
                var parsedData = msg.body;
                localStorage.setItem("tokenKey",parsedData.tokenKey);
                localStorage.setItem("tokenKeySecret",parsedData.tokenKeySecret);
                window.location.href= parsedData.authorizationUrl;
                return false;
            });
        };

        function sendMes() {
            eb.publish("chat.to.server", {classifier:"loginUri"});
        }

    </script>
</head>
<body>
    <button onclick="sendMes()">Login with Twitter</button>
</body>
</html>